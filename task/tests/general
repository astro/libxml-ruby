#!/usr/bin/env ratch

# Run unit tests

live = commandline.flag?('--live')

unless live
  $LOAD_PATH.unshift(File.expand_path('ext/libxslt'))
end

main 'tests/general' do
  if find = commandline[0]
    unless file?(find)
      find = File.join(find, '**', '*.rb')
    end
  else
    find = 'tests/**/*.rb'
  end

  Dir.glob(find).each do |file|
    next if dir?(file)
    begin
      puts "Loading: #{file}" if $DEBUG
      load(file)
    rescue LoadError
      puts "Error loading: #{file}"
    end
  end
end

